name: Generate Scorecards Reminders
on:
  schedule:
    # Run every day at 9am
    - cron: '0 9 * * *'
  workflow_dispatch:
jobs:
  generate-scorecards-reminders:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - channel: CHANNEL1
            webhook: ${{ secrets.SLACK_WEBHOOK_URL_CHANNEL1 }}
          - channel: CHANNEL2
            webhook: ${{ secrets.SLACK_WEBHOOK_URL_CHANNEL2 }}
    steps:
      - name: Generate Scorecards Reminder for ${{ matrix.channel }}
        uses: port-labs/port-sender@v0.2.4
        with:
          operation_kind: scorecard_reminder
          port_client_id: ${{ secrets.PORT_CLIENT_ID }}
          port_client_secret: ${{ secrets.PORT_CLIENT_SECRET }}
          slack_webhook_url: ${{ matrix.webhook }}
          blueprint: bitbucketRepository
          scorecard: Ownership
          target_kind: slack
